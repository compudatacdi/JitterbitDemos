({
	myAction : function(component, event, helper) {
		
	}, 
        

    doInit : function(component, event, helper) 
    {
        //alert("doInit"); 
        
        //get and store the product on the current sf opportunity line item
		helper.getOpportunityLineItemProductCode(
            component, event, helper, 
            function(){
            }
        );

    },


	//handleProductCodeChange   /  handleValueChange 
    handleProductCodeChange : function (component, event, helper) {
        //alert("old value: " + event.getParam("oldValue"));
        //alert("current value: " + event.getParam("value"));

        var strPartNum = event.getParam("value");
        
        //get and store the epicor part info
        helper.getEpicorPart(
            component, event, helper, 
            strPartNum,
            function(){                
            }    
        );

    },
       

    //https://salesforce.stackexchange.com/questions/211053/accessing-data-in-the-controller-and-app-file-that-is-returned-from-a-helper-fun/211054#211054
    handle_btnGetPricing_poc_this_works : function(component, event, helper) 
    {
		helper.loadData(component, event, helper, "part x", function(){
			component.set("v.valuePriceCode1", component.get("v.valuePriceCodeTemp"));
		}); 

        helper.loadData(component, event, helper, "part z", function(){
			component.set("v.valuePriceCode2", component.get("v.valuePriceCodeTemp"));
      	}); 
                
    },
    
    handle_btnGetPricing : function(component, event, helper) 
    {
        
        if(component.get("v.lblMessage").indexOf("Epicor Error") != -1){
            //note: make user fix connection error before trying to get pricing
	        if(component.get("v.lblMessage").indexOf("Invalid UOM") != -1){
                //note: exception since they can fix this on the form 
            }
            else{
                alert("Please fix Epicor Error and hit refresh before continuing.");
                return;
            }
        }
            
        component.set("v.lblMessage", "Retrieving Information....");
        component.set("v.lblDebugMessage", "");

        component.set("v.valuePrice1", "");
        component.set("v.valuePriceCode1", ""); 
        component.set("v.valuePrice2", "");
        component.set("v.valuePriceCode2", ""); 
        component.set("v.valuePrice3", "");
        component.set("v.valuePriceCode3", ""); 
        component.set("v.valuePrice4", "");
        component.set("v.valuePriceCode4", ""); 
        component.set("v.valuePrice5", "");
        component.set("v.valuePriceCode5", ""); 

        component.set('v.loaded', false);
        var strPartNum = component.get("v.opportunityLineItemProductCode");
        
        helper.getEpicorPricing(
            component, event, helper, 
            component.get("v.epicorCustId"),
            strPartNum,
            component.get("v.valueQuantity1"),
            component.get("v.valueUOM1"),

            function(){
                if(component.get("v.lblMessage").indexOf('Error') == -1  
                  || component.get("v.lblMessage").indexOf('Invalid UOM') != -1){
					if(component.get("v.lblMessage").indexOf('Invalid UOM') == -1  ){
                        component.set("v.valuePrice1", component.get("v.valuePriceTemp"));
                        component.set("v.valuePriceCode1", component.get("v.valuePriceCodeTemp")); 
                        component.set("v.lblMessage", "Epicor Data Loaded");
                    }
                    else{
                        component.set("v.valuePriceCode1", "Invalid UOM");
                        component.set("v.lblMessage", "Epicor Data Loaded");
                    }

                    //getRestOfPricing(); 
                    //var getRestOfPricing = component.get('c.getRestOfPricing');
                    //$A.enqueueAction(getRestOfPricing);

                    //note: tried breaking this out to it's own method, but strange things happen
                    if(component.get("v.valueQuantity2") != 0)
                    {
                        component.set('v.loaded', false);
                        helper.getEpicorPricing(
                            component, event, helper, 
                            component.get("v.epicorCustId"),
                            strPartNum,
                            component.get("v.valueQuantity2"),
				            component.get("v.valueUOM2"),
                            function(){
								if(component.get("v.lblMessage").indexOf('Invalid UOM') == -1  ){
                                    component.set("v.valuePrice2", component.get("v.valuePriceTemp"));
                                    component.set("v.valuePriceCode2", component.get("v.valuePriceCodeTemp")); 
                                    component.set("v.lblMessage", "Epicor Data Loaded");
                                    component.set('v.loaded', true);
                                } 
                                else{
                                    component.set("v.valuePriceCode2", "Invalid UOM");
                                    component.set("v.lblMessage", "Epicor Data Loaded");           
                                }
                                
                            }
                        ); 
                    };
                    
                    
                    if(component.get("v.valueQuantity3") != 0) 
                    {
                        component.set('v.loaded', false);
                        helper.getEpicorPricing(
                            component, event, helper, 
                            component.get("v.epicorCustId"),
                            strPartNum,
                            component.get("v.valueQuantity3"),
				            component.get("v.valueUOM3"),
                            function(){
                                if(component.get("v.lblMessage").indexOf('Invalid UOM') == -1  ){
                                    component.set("v.valuePrice3", component.get("v.valuePriceTemp"));
                                    component.set("v.valuePriceCode3", component.get("v.valuePriceCodeTemp"));
                                    component.set("v.lblMessage", "Epicor Data Loaded");
                                    component.set('v.loaded', true);
                                }
                                else{
                                    component.set("v.valuePriceCode3", "Invalid UOM");
                                    component.set("v.lblMessage", "Epicor Data Loaded");         
                                }
                            }
                        ); 
                    };
            
                    if(component.get("v.valueQuantity4") != 0)
                    {
                        component.set('v.loaded', false);
                        helper.getEpicorPricing(
                            component, event, helper, 
                            component.get("v.epicorCustId"),
                            strPartNum,
                            component.get("v.valueQuantity4"),
				            component.get("v.valueUOM4"),
                            function(){
                                if(component.get("v.lblMessage").indexOf('Invalid UOM') == -1  ){
                                    component.set("v.valuePrice4", component.get("v.valuePriceTemp"));
                                    component.set("v.valuePriceCode4", component.get("v.valuePriceCodeTemp")); 
                                    component.set("v.lblMessage", "Epicor Data Loaded");
                                    component.set('v.loaded', true);
                                }
                                else{
                                    component.set("v.valuePriceCode4", "Invalid UOM");
                                    component.set("v.lblMessage", "Epicor Data Loaded");         
                                }

                            }
                        ); 
                    };
            
                    if(component.get("v.valueQuantity5") != 0)
                    {
                        component.set('v.loaded', false);
                        helper.getEpicorPricing(
                            component, event, helper, 
                            component.get("v.epicorCustId"),
                            strPartNum,
                            component.get("v.valueQuantity5"),
				            component.get("v.valueUOM5"),
                            function(){
                                if(component.get("v.lblMessage").indexOf('Invalid UOM') == -1  ){
                                    component.set("v.valuePrice5", component.get("v.valuePriceTemp"));
                                    component.set("v.valuePriceCode5", component.get("v.valuePriceCodeTemp")); 
                                    component.set("v.lblMessage", "Epicor Data Loaded");
                                    component.set('v.loaded', true);
                                }
                                else{
                                    component.set("v.valuePriceCode5", "Invalid UOM");
                                    component.set("v.lblMessage", "Epicor Data Loaded");
                                }

                            } 
                        ); 
                    };

                    
                }
                
				component.set('v.loaded', true);

            }
        );
        
                
        /*
        var getRestOfPricing = component.get('c.getRestOfPricing');
        $A.enqueueAction(getRestOfPricing);
        */
        
		/*
        if(component.get("v.valueQuantity2") != 0)
        {
			component.set('v.loaded', false);
            helper.getEpicorPricing(
                component, event, helper, 
	            component.get("v.epicorCustId"),
                strPartNum,
                component.get("v.valueQuantity2"),
                component.get("v.epicorPartUOM"),
                function(){
                    component.set("v.valuePrice2", component.get("v.valuePriceTemp"));
                    component.set("v.valuePriceCode2", component.get("v.valuePriceCodeTemp")); 
			        component.set("v.lblMessage", "Epicor Data Loaded");
					component.set('v.loaded', true);
                }
            ); 
        };
        
        
        if(component.get("v.valueQuantity3") != 0)
        {
			component.set('v.loaded', false);
            helper.getEpicorPricing(
                component, event, helper, 
                component.get("v.epicorCustId"),
                strPartNum,
                component.get("v.valueQuantity3"),
                component.get("v.epicorPartUOM"),
                function(){
                    component.set("v.valuePrice3", component.get("v.valuePriceTemp"));
                    component.set("v.valuePriceCode3", component.get("v.valuePriceCodeTemp"));
			        component.set("v.lblMessage", "Epicor Data Loaded");
					component.set('v.loaded', true);
                }
            ); 
        };

        if(component.get("v.valueQuantity4") != 0)
        {
			component.set('v.loaded', false);
            helper.getEpicorPricing(
                component, event, helper, 
	            component.get("v.epicorCustId"),
                strPartNum,
                component.get("v.valueQuantity4"),
                component.get("v.epicorPartUOM"),
                function(){
                    component.set("v.valuePrice4", component.get("v.valuePriceTemp"));
                    component.set("v.valuePriceCode4", component.get("v.valuePriceCodeTemp")); 
			        component.set("v.lblMessage", "Epicor Data Loaded");
					component.set('v.loaded', true);
                }
            ); 
        };

        if(component.get("v.valueQuantity5") != 0)
        {
			component.set('v.loaded', false);
            helper.getEpicorPricing(
                component, event, helper, 
	            component.get("v.epicorCustId"),
                strPartNum,
                component.get("v.valueQuantity5"),
                component.get("v.epicorPartUOM"),
                function(){
                    component.set("v.valuePrice5", component.get("v.valuePriceTemp"));
                    component.set("v.valuePriceCode5", component.get("v.valuePriceCodeTemp")); 
			        component.set("v.lblMessage", "Epicor Data Loaded");
					component.set('v.loaded', true);
                } 
            ); 
        };
		*/ 

    },

})